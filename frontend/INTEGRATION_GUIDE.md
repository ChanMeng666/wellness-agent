# Wellness Agent 前端集成指南

本指南说明了如何将 Wellness Agent 功能集成到现有的 Next.js 前端项目中。

## 已集成的功能

我们已经成功将 Wellness Agent 的核心功能集成到现有的前端界面中：

1. **角色选择功能** - 用户可以选择他们的角色（员工、HR经理或雇主）
2. **基于角色的欢迎消息** - 系统会根据所选角色显示不同的欢迎消息
3. **消息会话管理** - 会话ID在对话过程中保持不变
4. **与后端的API集成** - 前端直接与Wellness Agent后端通信

## 如何使用

### 启动集成系统

1. 首先，启动后端服务器：
   ```
   python run_dev_server.py
   ```

2. 然后，启动前端开发服务器：
   ```
   cd frontend
   pnpm dev
   ```

3. 访问 http://localhost:3000，您将被重定向到聊天界面

### 使用流程

1. 在聊天界面顶部选择您的角色（员工、HR经理或雇主）
2. 系统会根据您的角色显示适当的欢迎消息
3. 输入消息并发送，系统会将其转发到后端
4. 后端处理消息后，响应将显示在聊天界面中

## 技术细节

### 集成点

1. `components/role-selector.tsx` - 新创建的角色选择器组件
2. `components/chat.tsx` - 修改以支持角色选择和会话管理
3. `app/api/direct-chat/route.ts` - API代理，负责与后端通信

### 数据流

1. 用户在界面上选择角色
2. 用户输入消息并发送
3. 前端通过 `/api/direct-chat` 端点将请求发送到后端
4. 后端处理请求并返回响应
5. 前端接收响应并在界面上显示

## 故障排除

### 常见问题

1. **消息未发送** - 检查浏览器控制台是否有错误信息，确保后端服务器正在运行

2. **未收到响应** - 检查`.env.local`中的`NEXT_PUBLIC_BACKEND_URL`是否指向正确的后端地址

3. **格式错误** - 如果看到格式错误，可能是API请求格式与后端期望的不匹配。检查控制台日志中的请求和响应详情。

## 后续发展

1. 增强UI设计，更好地集成到现有风格中
2. 添加更多Wellness Agent特定的功能
3. 改进错误处理和用户反馈
4. 集成用户认证系统 